<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-05-15 dim. 18:02 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Se localiser avec Python</title>
<meta name="author" content="Delhomme Fabien" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="~/MathCoursOrg.github.io/index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Se localiser avec Python</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org5400543">1. Se localiser avec Python</a></li>
<li><a href="#orgda66cef">2. Préparation</a></li>
<li><a href="#org3c06f66">3. Ce qu&rsquo;il faut faire</a>
<ul>
<li><a href="#org69badbd">3.1. Premières consignes</a></li>
<li><a href="#org2b0a5eb">3.2. Deuxième consignes</a></li>
<li><a href="#orgfe6b7d2">3.3. Troisième consignes</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org5400543" class="outline-2">
<h2 id="org5400543"><span class="section-number-2">1.</span> Se localiser avec Python</h2>
<div class="outline-text-2" id="text-1">
<p>
Objectif : Quelle est la trajectoire la plus courte entre le lycée et la Tour
Eiffel ?
</p>

<p>
<b>Ressources :</b>
</p>

<ol class="org-ol">
<li><a href="https://pixees.fr/informatiquelycee/n_site/asset/pyroutelib3.py">Lien vers le fichier python pyroutelib3</a></li>
<li><a href="https://www.openstreetmap.org/#map=5/47.591/8.833">Carte d&rsquo;OpenStreepMap</a></li>
<li><a href="http://bboxfinder.com">Site pour trouver les coordonnées d&rsquo;un point</a> <b><b>Attention</b></b> il faut cliquer
sur l&rsquo;option «Lat/Lng» pour avoir d&rsquo;abord la Lattitude, puis la Longitude du
point.</li>
<li><a href="https://youtu.be/JPeCmKFrKio">Lien vers la vidéo vue en cours sur l&rsquo;algorithme de Dijkstra</a>, pour les
curieux qui voudraient la revoir.</li>
</ol>
</div>
</div>


<div id="outline-container-orgda66cef" class="outline-2">
<h2 id="orgda66cef"><span class="section-number-2">2.</span> Préparation</h2>
<div class="outline-text-2" id="text-2">
<ol class="org-ol">
<li>Dans le bureau, créer un nouveau dossier, appelé «Itineraire» (sans accent).</li>
<li>Télécharger le fichier python pyroutelib3 (lien à retrouver plus haut), et
placer ce fichier dans le dossier «Itineraire», créé juste avant.</li>
<li><p>
Ouvrir <code>Notepad++</code>, et crée un nouveau fichier, appelé «itineraire.py» dans
le dossier «Itineraire». Dans ce fichier, entrez le code suivant :
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ff79c6;">from</span> pyroutelib3 <span style="color: #ff79c6;">import</span> Router
<span style="color: #6272a4;">####</span><span style="color: #6272a4;">ATTENTION : les 4 lignes suivantes sont &#224; conserver uniquement si vous ex&#233;cutez ce programme depuis le lyc&#233;e#####</span>
<span style="color: #ff79c6;">import</span> urllib.request
proxy = urllib.request.ProxyHandler({<span style="color: #f1fa8c;">'https'</span>:<span style="color: #f1fa8c;">'172.16.0.1:3128'</span>})
<span style="color: #ffc9e8;">opener</span> = urllib.request.build_opener(proxy)
urllib.request.install_opener(opener)
<span style="color: #6272a4;">#################</span>
<span style="color: #ffc9e8;">router</span> = Router(<span style="color: #f1fa8c;">"car"</span>)

<span style="color: #ffc9e8;">depart</span> = router.findNode(<span style="color: #bd93f9; font-weight: bold;">48.746936</span>,<span style="color: #bd93f9; font-weight: bold;">2.489830</span>) <span style="color: #6272a4;">#</span><span style="color: #6272a4;">IL FAUT COMPL&#201;TER PAR LES COORDON&#201;ES DU D&#201;PART</span>
<span style="color: #ffc9e8;">arrivee</span> = router.findNode(<span style="color: #bd93f9; font-weight: bold;">48.749087</span>,<span style="color: #bd93f9; font-weight: bold;">2.513359</span>)<span style="color: #6272a4;">#</span><span style="color: #6272a4;">IL FAUT COMPL&#201;TER PAR LES COORDON&#201;ES DE L'ARRIV&#201;E</span>
<span style="color: #ffc9e8;">status</span>, <span style="color: #ffc9e8;">route</span> = router.doRoute(depart, arrivee)
<span style="color: #ff79c6;">if</span> status == <span style="color: #f1fa8c;">'success'</span>:
    routeLatLons = <span style="color: #ffb86c;">list</span>(<span style="color: #ffb86c;">map</span>(router.nodeLatLon, route))
</pre>
</div></li>
<li>Appuyez sur «Ctrl-r» sur votre ordinateur. Une fenêtre s&rsquo;ouvre en bas à
gauche. Tapez «cmd», puis, appuyez sur la touche «Entrée».</li>
<li><p>
Dans la console qui vient de s&rsquo;ouvrir, tapez :
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #bd93f9;">cd</span> Desktop/Itineraire
</pre>
</div>
<p>
Confirmer votre commande par «Entrée». Vous pouvez tapez «Des» puis appuyez
sur «Tab» pour autocompléter le nom du dossier.
</p></li>
<li><p>
Une fois cette commande réalisée, vous pouvez taper
</p>
<div class="org-src-container">
<pre class="src src-bash">python itineraire.py
</pre>
</div></li>
</ol>


<p>
<span class="underline">Quelques explications sur le programme que l&rsquo;on vient de taper :</span>
</p>

<ol class="org-ol">
<li>Nous commençons par importer la bibliothèque &ldquo;pyroutelib3&rdquo; avec la première
ligne <code>from pyroutelib3 import Router</code></li>
<li>La deuxième ligne permet de définir le véhicule qui sera utilisé pour
effectuer le trajet. Dans notre cas, nous utilisons une voiture (<code>car</code>), mais
il est possible de choisir d&rsquo;autres moyens de transport : cycle, foot, horse,
tram, train</li>
<li>Les 2 lignes suivantes permettent de définir le point de départ et le point
d&rsquo;arrivée. Nous avons <code>router.findNode(latitude, longitude)</code>, il suffit de
renseigner la latitude et la longitude du lieu.</li>
<li>La ligne <code>status, route = router.doRoute(depart, arrivee)</code> permet d&rsquo;effectuer
le calcul de l&rsquo;itinéraire.</li>
<li>La dernière ligne est exécutée uniquement si le calcul est mené à son terme
(&ldquo;if&rdquo; de la ligne précédente). La variable <code>routeLatLons</code> contient la liste
des coordonnées des points de cheminement (points qui constituent le chemin
entre le point de départ et le point d&rsquo;arrivée)</li>
</ol>
</div>
</div>

<div id="outline-container-org3c06f66" class="outline-2">
<h2 id="org3c06f66"><span class="section-number-2">3.</span> Ce qu&rsquo;il faut faire</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org69badbd" class="outline-3">
<h3 id="org69badbd"><span class="section-number-3">3.1.</span> Premières consignes</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Écrivez un court texte sur une demie feuille qui résume le fonctionnement de
l&rsquo;algorithme de Dijkstra. Seuls les principes généraux sont attendus.
</p>
</div>
</div>

<div id="outline-container-org2b0a5eb" class="outline-3">
<h3 id="org2b0a5eb"><span class="section-number-3">3.2.</span> Deuxième consignes</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>Changer les coordonnées pour trouver le meilleur chemin de son propre
itinéraire. Quel est l&rsquo;itinéraire entre le lycée et la tour Eiffel ?</li>
<li>Changer le moyen de locomotion.</li>
</ol>
</div>
</div>

<div id="outline-container-orgfe6b7d2" class="outline-3">
<h3 id="orgfe6b7d2"><span class="section-number-3">3.3.</span> Troisième consignes</h3>
<div class="outline-text-3" id="text-3-3">
<ol class="org-ol">
<li><p>
Ajouter la ligne de code suivant en <b>haut</b> du fichier itineraire.py :
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ff79c6;">import</span> folium
</pre>
</div></li>
<li><p>
À la <b>fin</b> du fichier, vous ajoutez le code suivant :
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #ffc9e8;">c</span>= folium.Map(location=[<span style="color: #bd93f9; font-weight: bold;">48.746936</span>,<span style="color: #bd93f9; font-weight: bold;">2.489830</span>],zoom_start=<span style="color: #bd93f9; font-weight: bold;">10</span>)
<span style="color: #ff79c6;">for</span> coord <span style="color: #ff79c6;">in</span> routeLatLons:
    coord=<span style="color: #ffb86c;">list</span>(coord)
    folium.Marker(coord).add_to(c)
c.save(<span style="color: #f1fa8c;">'maCarte.html'</span>)
</pre>
</div></li>
<li>Si votre code fonction, vous pouvez ouvrir avec votre navigateur favori par
exemple Firefox, le fichier <code>maCarte.html</code> présent dans le dossier Itineraire.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Delhomme Fabien</p>
<p class="date">Created: 2022-05-15 dim. 18:02</p>
</div>
</body>
</html>
